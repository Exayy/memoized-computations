{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 84bcff9c109a7c2cf5f6","webpack:///./src/index.js"],"names":["shallowEqual","shallowComparator","createSelector","mainMemoization","defaultSource","compareMethod","a","b","Array","isArray","Object","aKeys","keys","bKeys","length","i","l","sourceFunc","input","createSource","refSource","sources","outputFunc","Error","finalSources","map","source","memoization","state","parameters","memoizationKey","finalMemoization","useMemoizedValue","sourcesValues","index","sourceValue","result","memoizedData"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;SC7BgBA,Y,GAAAA,Y;SAmBAC,iB,GAAAA,iB;SAoBAC,c,GAAAA,c;;;;AAhDhB;AACA,KAAMC,kBAAkB,EAAxB;;AAEA;AACA,KAAMC,gBAAgB;AAClBC,oBAAgB;AADE,EAAtB;;AAIA;AACO,UAASL,YAAT,CAAsBM,CAAtB,EAAyBC,CAAzB,EAA2B;AAC9B,SAAI,CAACC,MAAMC,OAAN,CAAcH,CAAd,CAAD,IAAqBA,MAAMI,OAAOJ,CAAP,CAA3B,IAAwC,CAACE,MAAMC,OAAN,CAAcF,CAAd,CAAzC,IAA6DA,MAAMG,OAAOH,CAAP,CAAvE,EAAkF;AAC9E,gBAAOD,MAAMC,CAAb;AACH;;AAED,SAAMI,QAAQD,OAAOE,IAAP,CAAYN,CAAZ,CAAd;AACA,SAAMO,QAAQH,OAAOE,IAAP,CAAYL,CAAZ,CAAd;AACA,SAAIM,MAAMC,MAAN,KAAiBH,MAAMG,MAA3B,EAAkC;AAC9B,gBAAO,KAAP;AACH;AACD,UAAK,IAAIC,IAAI,CAAR,EAAWC,IAAIH,MAAMC,MAA1B,EAAkCC,IAAIC,CAAtC,EAAyCD,GAAzC,EAA6C;AACzC,aAAIT,EAAEO,MAAME,CAAN,CAAF,MAAgBR,EAAEM,MAAME,CAAN,CAAF,CAApB,EAAiC;AAC7B,oBAAO,KAAP;AACH;AACJ;AACD,YAAO,IAAP;AACH;;AAED;AACO,UAASd,iBAAT,CAA2BgB,UAA3B,EAAsC;AACzC,YAAO;AACHC,gBAAQD,UADL;AAEHZ,wBAAgBL;AAFb,MAAP;AAIH;;AAED,UAASmB,YAAT,CAAsBC,SAAtB,EAAiC;AAC7B,SAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;AACjC,6BACOhB,aADP;AAEIc,oBAAQE;AAFZ;AAIH;AACD,yBACOhB,aADP,EAEOgB,SAFP;AAIH;;AAEM,UAASlB,cAAT,CAAwBmB,OAAxB,EAAiCC,UAAjC,EAA6C;;AAEhD,SAAI,CAACd,MAAMC,OAAN,CAAcY,OAAd,CAAL,EAA6B;AACzB,eAAM,IAAIE,KAAJ,CAAU,kCAAV,CAAN;AACH;;AAED,SAAI,OAAOD,UAAP,KAAsB,UAA1B,EAAsC;AAClC,eAAM,IAAIC,KAAJ,CAAU,2CAAV,CAAN;AACH;;AAED,SAAMC,eAAeH,QAAQI,GAAR,CAAY,UAACC,MAAD,EAAY;AACzC,gBAAOP,aAAaO,MAAb,CAAP;AACH,MAFoB,CAArB;;AAIA,SAAIC,cAAc,IAAlB;;AAEA,YAAO,UAACC,KAAD,EAAQC,UAAR,EAAoBC,cAApB,EAAuC;;AAE1C,aAAMC,mBAAmBD,iBAAiB3B,gBAAgB2B,cAAhB,CAAjB,GAAmDH,WAA5E;;AAEA,aAAIK,mBAAmBD,mBAAmB,IAAnB,GAA0B,KAAjD;;AAEA;AACA,aAAME,gBAAgBT,aAAaC,GAAb,CAAiB,UAACC,MAAD,EAASQ,KAAT,EAAmB;AACtD;AACA,iBAAMC,cAAcT,OAAOR,KAAP,CAAaU,KAAb,EAAoBC,UAApB,EAAgCC,cAAhC,CAApB;;AAEA;AACA,iBAAIE,gBAAJ,EAAqB;AACjB,qBAAIN,OAAOrB,aAAX,EAA0B;AACtB2B,wCAAmBN,OAAOrB,aAAP,CAAqB0B,iBAAiBE,aAAjB,CAA+BC,KAA/B,CAArB,EAA4DC,WAA5D,CAAnB;AACH,kBAFD,MAGK;AACDH,wCAAoBD,iBAAiBE,aAAjB,CAA+BC,KAA/B,MAA0CC,WAA9D;AACH;AACJ;;AAED,oBAAOA,WAAP;AACH,UAfqB,CAAtB;;AAiBA,aAAIH,gBAAJ,EAAsB;AAClB,oBAAOD,iBAAiBK,MAAxB;AACH,UAFD,MAEO;AACH,iBAAMA,SAASd,+CAAcW,aAAd,EAAf;AACA,iBAAMI,eAAe;AACjBJ,6CADiB;AAEjBG;AAFiB,cAArB;AAIA,iBAAIN,cAAJ,EAAoB;AAChB3B,iCAAgB2B,cAAhB,IAAkCO,YAAlC;AACH,cAFD,MAGK;AACDV,+BAAcU,YAAd;AACH;AACD,oBAAOD,MAAP;AACH;AACJ,MAxCD;AAyCH,E","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory();\n\telse\n\t\troot[\"library\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 84bcff9c109a7c2cf5f6","// Memoization\r\nconst mainMemoization = {}\r\n\r\n// Utils\r\nconst defaultSource = {\r\n    compareMethod : null,\r\n}\r\n\r\n// Compare methods\r\nexport function shallowEqual(a, b){\r\n    if (!Array.isArray(a) || a !== Object(a) || !Array.isArray(b) || b !== Object(b)) {\r\n        return a === b\r\n    }\r\n\r\n    const aKeys = Object.keys(a)\r\n    const bKeys = Object.keys(b)\r\n    if (bKeys.length !== aKeys.length){\r\n        return false\r\n    }\r\n    for (let i = 0, l = bKeys.length; i < l; i++){\r\n        if (a[bKeys[i]] !== b[bKeys[i]]) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\n\r\n// Handler\r\nexport function shallowComparator(sourceFunc){\r\n    return {\r\n        input : sourceFunc,\r\n        compareMethod : shallowEqual,\r\n    }\r\n}\r\n\r\nfunction createSource(refSource) {\r\n    if (typeof refSource === \"function\") {\r\n        return {\r\n            ...defaultSource,\r\n            input : refSource,\r\n        }\r\n    }\r\n    return {\r\n        ...defaultSource,\r\n        ...refSource,\r\n    }\r\n}\r\n\r\nexport function createSelector(sources, outputFunc) {\r\n\r\n    if (!Array.isArray(sources)) {\r\n        throw new Error(\"Expected sources to be an array.\")\r\n    }\r\n\r\n    if (typeof outputFunc !== \"function\") {\r\n        throw new Error(\"Expected the outputFunc to be a function.\")\r\n    }\r\n\r\n    const finalSources = sources.map((source) => {\r\n        return createSource(source)\r\n    })\r\n\r\n    let memoization = null\r\n\r\n    return (state, parameters, memoizationKey) => {\r\n\r\n        const finalMemoization = memoizationKey ? mainMemoization[memoizationKey] : memoization\r\n\r\n        let useMemoizedValue = finalMemoization ? true : false\r\n\r\n        // Sources values\r\n        const sourcesValues = finalSources.map((source, index) => {\r\n            // Calc value\r\n            const sourceValue = source.input(state, parameters, memoizationKey)\r\n\r\n            // If necessary, check if the source value is different from memoized one\r\n            if (useMemoizedValue){\r\n                if (source.compareMethod)Â {\r\n                    useMemoizedValue = source.compareMethod(finalMemoization.sourcesValues[index], sourceValue)\r\n                }\r\n                else {\r\n                    useMemoizedValue = (finalMemoization.sourcesValues[index] === sourceValue)\r\n                }\r\n            }\r\n\r\n            return sourceValue\r\n        })\r\n\r\n        if (useMemoizedValue) {\r\n            return finalMemoization.result\r\n        } else {\r\n            const result = outputFunc(...sourcesValues)\r\n            const memoizedData = {\r\n                sourcesValues,\r\n                result,\r\n            }\r\n            if (memoizationKey) {\r\n                mainMemoization[memoizationKey] = memoizedData\r\n            }\r\n            else {\r\n                memoization = memoizedData\r\n            }\r\n            return result\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}